---

-   user:
        name: "{{vault_user}}"
        comment: "Vault Account"
        state: present
    notify:
        - vault_restart

-   template:
        src: templates/etc/systemd/system/vault.service
        dest: "/etc/systemd/system/{{vault_service}}.service"
        owner: root
        group: root
        mode: 0640
    notify:
        - vault_systemctl_daemon_reload
        - vault_restart

-   file:
        path: "/etc/{{vault_service}}.d"
        owner: root
        group: root
        mode: 0755
        state: directory
    notify:
        - vault_restart

-   systemd:
        name: "{{vault_service}}"
        state: started
        enabled: yes

-   template:
        src: templates/etc/profile.d/vault.sh
        dest: "/etc/profile.d/{{vault_service}}.sh"
        owner: root
        group: root
        mode: 0644
